# ğŸ“¦ API de Inventario

## ğŸ“„ DescripciÃ³n

Esta es una API RESTful para gestionar un sistema de inventario de productos.  
Permite realizar operaciones **CRUD** (Crear, Leer, Actualizar, Eliminar) sobre productos, asÃ­ como gestionar la **autenticaciÃ³n y autorizaciÃ³n de usuarios** mediante JWT.

---

## ğŸš€ TecnologÃ­as Utilizadas

- **.NET Core 8** â€“ Framework principal de desarrollo
- **Entity Framework Core** â€“ ORM para acceso a la base de datos
- **SQL Server** â€“ Motor de base de datos relacional
- **JWT** â€“ JSON Web Tokens para autenticaciÃ³n y autorizaciÃ³n

---

## ğŸ›  Requisitos

- [.NET SDK 8](https://dotnet.microsoft.com/en-us/download/dotnet/8.0)
- SQL Server instalado localmente o accesible remotamente

---

## âš™ï¸ ConfiguraciÃ³n

### 1. Crear la base de datos

Crea una base de datos llamada `TaskManagerDB` en SQL Server.  
Ejecuta el script **`ScriptCreacion de tablas.sql.sql`** ubicado en la raÃ­z del respositorio.  
Este script crea las tablas necesarias y un **usuario administrador por defecto**.

Email:admin@sistema.com
Password:1234

### 2. Restaurar dependencias

```bash
dotnet restore
```

### 3. Configurar cadena de conexiÃ³n

Edita el archivo `appsettings.json` y configura tu cadena de conexiÃ³n a SQL Server:

```json
"ConnectionStrings": {
  "DefaultConnection": "Server=TU_SERVIDOR;Database=TaskManagerDB;Trusted_Connection=True;"
}
```

### 4. Aplicar migraciones (opcional)

```bash
dotnet ef database update
```

### 5. Ejecutar la API

```bash
dotnet run
```

La API estarÃ¡ disponible por defecto en:  
ğŸ“ `https://localhost:7130`

---

## ğŸ” AutenticaciÃ³n y Seguridad

- La API utiliza **JWT Bearer Tokens** para proteger los endpoints.
- Para acceder a rutas protegidas, incluye el token en la cabecera `Authorization`:

```http
Authorization: Bearer tu_token_aqui
```

- Se implementa autorizaciÃ³n por **roles**: `Administrador`, `Supervisor`, `Empleado`.
- La seguridad estÃ¡ reforzada mediante un **middleware personalizado** que:
  - Captura errores no controlados
  - Responde con mensajes uniformes y trazabilidad
  - Evita fugas de informaciÃ³n interna

---

## âš ï¸ Manejo de Errores y Respuestas

La API devuelve respuestas estandarizadas en el siguiente formato JSON:

```json
{
  "code": 400,
  "message": "El campo Email es obligatorio.",
  "traceid": "f97a8c1c-34e6-4e5b-a23a-fd39f95d1f19",
  "data": null
}
```

Esto garantiza una comunicaciÃ³n clara y consistente entre el backend y los consumidores.

---

## ğŸ§ª Pruebas Unitarias

Este proyecto cuenta con pruebas unitarias implementadas con:

- `xUnit` â€“ Framework de pruebas
- `Moq` â€“ SimulaciÃ³n de servicios y dependencias

Se han probado casos como:

- CreaciÃ³n y ediciÃ³n de usuarios y tareas
- Controladores (`UserController`, `TaskController`) con dependencias mockeadas

Para ejecutar las pruebas:

```bash
dotnet test
```

---

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT.  
Consulta el archivo [LICENSE](./LICENSE) para mÃ¡s informaciÃ³n.

---

## ğŸ“¬ Contacto

Â¿Tienes preguntas, sugerencias o encontraste un bug?

**Email:** [nirn18345@gmail.com](mailto:nirn18345@gmail.com)
